<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <a-scene
      embedded
      loading-screen="enabled: false;"
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <!-- Elemen gambar tanpa koordinat dulu -->
      <a-image
        id="arImage"
        src="assets/asset.png"
        look-at="[gps-camera]"
        scale="2 2 2"
      ></a-image>

      <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
      // Ambil lokasi GPS user
      navigator.geolocation.getCurrentPosition(
        function (pos) {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          console.log("Lokasi kamu:", lat, lon);
          alert(Lokasi terdeteksi!\nLat: ${lat}\nLng: ${lon});

          // Set lokasi ke elemen AR secara dinamis
          const arImage = document.getElementById("arImage");
          arImage.setAttribute("gps-entity-place", latitude: ${lat}; longitude: ${lon};);
        },
        function (err) {
          console.error("Gagal ambil lokasi:", err);
          alert("Tidak bisa mendapatkan lokasi. Pastikan izin lokasi diaktifkan dan gunakan browser Chrome.");
        },
        {
          enableHighAccuracy: true
        }
      );
    </script>
  </body>
</html>
